{% extends "base.html" %}
{% block title %}{{ user.username }} Profili{% endblock %}

{% block content %}
<style>
  .profile-container {
    max-width: 800px;
    margin: 2rem auto;
  }
  
  .profile-header {
    background: linear-gradient(135deg, #6e8efb, #a777e3);
    border-radius: 15px 15px 0 0;
    padding: 2rem;
    text-align: center;
    position: relative;
  }
  
  .profile-avatar {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    border: 5px solid white;
    object-fit: cover;
    margin-bottom: 1rem;
  }
  
  .profile-body {
    background: rgba(0, 0, 30, 0.85);
    padding: 2rem;
    border-radius: 0 0 15px 15px;
    border: 1px solid rgba(110, 142, 251, 0.3);
  }
  
  .profile-stats {
    display: flex;
    justify-content: space-around;
    margin: 2rem 0;
  }
  
  .stat-item {
    text-align: center;
  }
  
  .edit-form {
    margin-top: 2rem;
  }
  
  .edit-form textarea {
    width: 100%;
    min-height: 100px;
    margin-bottom: 1rem;
    border-radius: 10px;
    padding: 10px;
    border: 1px solid #6e8efb;
  }
  
  .edit-form input[type="file"] {
    margin-bottom: 1rem;
  }
</style>

<div class="profile-container">
  <div class="profile-header">
    <!-- Profil Fotoğrafı -->
    <img src="{{ url_for('static', filename='profile_images/' ~ (user.profile_image if user.profile_image else 'default_avatar.png')) }}" 
         alt="Avatar" class="profile-avatar">

    <h1>@{{ user.username }}</h1>
  </div>
  
  <div class="profile-body">
    <!-- Hakkımda -->
    <div class="bio-section">
      <h3>Hakkımda</h3>
      <p>{{ user.bio if user.bio else "Henüz bir biyografi eklenmemiş" }}</p>
    </div>
    
    <!-- İstatistikler -->
    <div class="profile-stats">
      <div class="stat-item">
        <h4>{{ stats.followers or 0 }}</h4>
        <p>Takipçi</p>
      </div>
      <div class="stat-item">
        <h4>{{ stats.following or 0 }}</h4>
        <p>Takip</p>
      </div>
      <div class="stat-item">
        <h4>{{ stats.posts or 0 }}</h4>
        <p>Gönderi</p>
      </div>
    </div>
    
    <!-- Profili Düzenle -->
    <div class="edit-form">
      <h3>Profili Düzenle</h3>
      <form method="POST" enctype="multipart/form-data">
        <label for="bio">Biyografi:</label>
        <textarea name="bio" id="bio">{{ user.bio }}</textarea>
        
        <label for="profile_image">Profil Fotoğrafı Yükle:</label>
        <input type="file" name="profile_image" id="profile_image" accept="image/*">
        
        <button type="submit" class="btn btn-success">Kaydet</button>
      </form>
    </div>
  </div>
</div>
{% endblock %}
