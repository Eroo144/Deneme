{% extends "base.html" %}

{% block content %}
<style>
    /* YILDIZLAR VE ARKA PLAN (base.html'den kopyala veya bu stil base'de zaten var) */
    html, body {
        height: 100%;
        margin: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        overflow-x: hidden;
        background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
        color: white;
    }
    /* POST SAYFASI √ñZEL STƒ∞LLERƒ∞ */
    .container-fluid.vh-100 {
        height: 100vh;
        max-width: 100%;
        padding: 20px;
        background: transparent !important; /* Arka plan gradient'inin g√∂r√ºnmesini saƒüla */
    }
    
    .row.h-100 {
        height: 100%;
    }
    
    .col-md-3.h-100, .col-md-6.h-100 {
        height: 100%;
        max-height: 100vh;
        color: white; /* T√ºm yazƒ±lar beyaz */
    }

    /* KARTLARI KARANLIK TEMAYA UYARLA */
    .col-md-3.h-100, .col-md-6.h-100, .posts-list > div {
        background-color: rgba(0, 0, 30, 0.85) !important;
        border-radius: 15px;
        border: 1px solid rgba(110, 142, 251, 0.3);
        padding: 20px;
        margin-bottom: 20px;
        backdrop-filter: blur(10px);
        box-shadow: 0 8px 30px rgba(0,0,0,0.7);
        color: white !important;
    }

    /* FORMLARI KARANLIK TEMAYA UYARLA */
    .form-control {
        background-color: rgba(30, 30, 50, 0.7) !important;
        border: 1px solid rgba(110, 142, 251, 0.3) !important;
        color: white !important;
    }
    .form-control:focus {
        background-color: rgba(40, 40, 60, 0.8) !important;
        border-color: #6e8efb !important;
        color: white !important;
        box-shadow: 0 0 0 0.25rem rgba(110, 142, 251, 0.25) !important;
    }

    /* YORUM ALANI STƒ∞LLERƒ∞ */
    .posts-list > div .mb-2 {
        background-color: rgba(40, 40, 60, 0.7) !important;
        color: #f0f0f0 !important;
        border: none !important;
    }
    hr {
        border-color: rgba(255, 255, 255, 0.1) !important;
    }
</style>

<div class="container-fluid vh-100">
    <div class="row h-100">
        <!-- Sol: G√∂nderi Payla≈üma Kartƒ± -->
        <div class="col-md-3 h-100 d-flex flex-column" style="padding-right: 15px;">
            <h3>G√∂nderi Payla≈ü</h3>
            <form method="POST" enctype="multipart/form-data" class="mb-4">
                <textarea name="content" rows="3" placeholder="Bir ≈üeyler yaz..." class="form-control mb-2" required></textarea>
                <input type="file" name="image" accept="image/*" class="form-control mb-2">
                <button type="submit" class="btn btn-primary w-100">Payla≈ü</button>
            </form>
        </div>

        <!-- Ortada: G√∂nderi Akƒ±≈üƒ± -->
        <div class="col-md-6 h-100" style="overflow-y: auto; padding: 0 15px;">
            <h3>G√∂nderiler</h3>
            <div class="posts-list">
                {% for post in posts %}
                    <div>
                        <strong>{{ post.author.username }}</strong><br>
                        <small>{{ post.timestamp.strftime("%d.%m.%Y %H:%M") }}</small>
                        <p>{{ post.body }}</p>
                        
                        {% if post.image %}
                            <div class="mt-2">
                                <img src="{{ url_for('static', filename='post_images/' + post.image) }}" alt="Post image" class="img-fluid" style="max-width: 100%; height: auto; border-radius: 8px;">
                            </div>
                        {% endif %}
                        
                        <div class="mt-3">
                            <form action="{{ url_for('like_post', post_id=post.id) }}" method="POST" style="display: inline;">
                                <button type="submit" class="btn btn-sm {% if post.is_liked_by(current_user) %}btn-danger{% else %}btn-outline-danger{% endif %} me-2">
                                    ‚ù§Ô∏è Beƒüen ({{ post.liked_by|length }})
                                </button>
                            </form>
                            <span>üí¨ Yorumlar ({{ post.post_comments|length }})</span>
                        </div>
                        
                        <div class="mt-3">
                            <form action="{{ url_for('comment_post', post_id=post.id) }}" method="POST">
                                <div class="input-group">
                                    <input type="text" name="comment" class="form-control" placeholder="Yorum yaz..." required>
                                    <button type="submit" class="btn btn-primary">G√∂nder</button>
                                </div>
                            </form>
                        </div>
                        
                        {% if post.post_comments %}
                            <div class="mt-3">
                                <h6>Yorumlar:</h6>
                                {% for comment in post.post_comments %}
                                    <div class="mb-2 p-2">
                                        <strong>{{ comment.user.username }}</strong>: 
                                        {{ comment.body }}
                                        <br>
                                        <small>{{ comment.timestamp.strftime("%d.%m.%Y %H:%M") }}</small>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}
                        <hr>
                    </div>
                {% else %}
                    <p>Hen√ºz g√∂nderi yok.</p>
                {% endfor %}
            </div>
        </div>

        <!-- Saƒü: Bilgilendirme Kartƒ± -->
        <div class="col-md-3 h-100" style="padding-left: 15px;">
            <h3>Bilgilendirme</h3>
            <div>
                <p>Bu alanda kullanƒ±cƒ±lar i√ßin √ße≈üitli bilgilendirmeler yapƒ±labilir. √ñrneƒüin, hesap ayarlarƒ±, duyurular veya yeni gelen √∂zellikler hakkƒ±nda bilgiler verilebilir.</p>
            </div>
        </div>
    </div>
</div>
{% endblock %}